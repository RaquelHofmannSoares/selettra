[2022-04-16T01:44:22.329Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:44:22.336Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:44:22.337Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:44:22.338Z][QUERY]: SHOW server_version;
[2022-04-16T01:45:25.995Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:45:26.003Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:45:26.004Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:45:26.005Z][QUERY]: SHOW server_version;
[2022-04-16T01:45:56.169Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:45:56.180Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:45:56.181Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:45:56.182Z][QUERY]: SHOW server_version;
[2022-04-16T01:55:42.855Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:55:42.863Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:55:42.864Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:55:42.865Z][QUERY]: SHOW server_version;
[2022-04-16T01:56:10.362Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:56:10.370Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:56:10.371Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:56:10.372Z][QUERY]: SHOW server_version;
[2022-04-16T01:59:44.519Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:59:44.528Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:59:44.530Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:59:44.531Z][QUERY]: SHOW server_version;
[2022-04-16T01:59:59.725Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T01:59:59.734Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T01:59:59.736Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T01:59:59.737Z][QUERY]: SHOW server_version;
[2022-04-16T02:10:33.713Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:10:33.722Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:10:33.723Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:10:33.724Z][QUERY]: SHOW server_version;
[2022-04-16T02:15:33.079Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:15:33.086Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:15:33.088Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:15:33.089Z][QUERY]: SHOW server_version;
[2022-04-16T02:15:48.217Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:15:48.224Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:15:48.226Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:15:48.227Z][QUERY]: SHOW server_version;
[2022-04-16T02:24:04.336Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:24:04.344Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:24:04.345Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:24:04.346Z][QUERY]: SHOW server_version;
[2022-04-16T02:26:30.735Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:26:30.742Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:26:30.744Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:26:30.745Z][QUERY]: SHOW server_version;
[2022-04-16T02:26:50.296Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:26:50.303Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:26:50.304Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:26:50.305Z][QUERY]: SHOW server_version;
[2022-04-16T02:26:53.260Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:26:53.267Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:26:53.268Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:26:53.269Z][QUERY]: SHOW server_version;
[2022-04-16T02:40:00.826Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:40:00.835Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:40:00.836Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:40:00.837Z][QUERY]: SHOW server_version;
[2022-04-16T02:44:17.165Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:44:17.173Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:44:17.175Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:44:17.176Z][QUERY]: SHOW server_version;
[2022-04-16T02:45:19.686Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:45:19.695Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:45:19.696Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:45:19.697Z][QUERY]: SHOW server_version;
[2022-04-16T02:45:35.490Z][QUERY]: SELECT * FROM current_schema()
[2022-04-16T02:45:35.497Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/.ts"
[2022-04-16T02:45:35.498Z][INFO]: No classes were found using the provided glob pattern:  "./src/shared/infra/typeorm/migrations/.ts"
[2022-04-16T02:45:35.499Z][QUERY]: SHOW server_version;
[2022-05-01T19:04:31.980Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:04:32.007Z][QUERY]: SHOW server_version;
[2022-05-01T19:04:32.010Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:04:32.056Z][QUERY]: CREATE TABLE "migrations" ("id" SERIAL NOT NULL, "timestamp" bigint NOT NULL, "name" character varying NOT NULL, CONSTRAINT "PK_8c82d7f526340ab734260ea46be" PRIMARY KEY ("id"))
[2022-05-01T19:04:32.106Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
[2022-05-01T19:04:32.109Z][QUERY]: CREATE TABLE "typeorm_metadata" ("type" character varying NOT NULL, "database" character varying, "schema" character varying, "table" character varying, "name" character varying, "value" text)
[2022-05-01T19:04:32.118Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:04:32.121Z]No migrations are pending
[2022-05-01T19:09:28.476Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:09:28.485Z][QUERY]: SHOW server_version;
[2022-05-01T19:09:28.488Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:09:28.493Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
[2022-05-01T19:09:28.497Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:09:28.499Z]No migrations are pending
[2022-05-01T19:11:32.750Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:11:34.569Z][QUERY]: SHOW server_version;
[2022-05-01T19:11:34.572Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:11:34.578Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
[2022-05-01T19:11:34.583Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:11:34.585Z]0 migrations are already loaded in the database.
[2022-05-01T19:11:34.586Z]1 migrations were found in the source code.
[2022-05-01T19:11:34.586Z]1 migrations are new migrations that needs to be executed.
[2022-05-01T19:11:34.587Z][QUERY]: START TRANSACTION
[2022-05-01T19:11:34.590Z][QUERY]: CREATE TABLE "Users" ("username" varchar(50) NOT NULL, "password" varchar(1000) NOT NULL, "name" varchar(100) NOT NULL, "status" int NOT NULL, CONSTRAINT "PK_ffc81a3b97dcbf8e320d5106c0d" PRIMARY KEY ("username"))
[2022-05-01T19:11:34.611Z][QUERY]: INSERT INTO "migrations"("timestamp", "name") VALUES ($1, $2) -- PARAMETERS: [1651430840384,"CreateTableUsers1651430840384"]
[2022-05-01T19:11:34.658Z]Migration CreateTableUsers1651430840384 has been executed successfully.
[2022-05-01T19:11:34.659Z][QUERY]: COMMIT
[2022-05-01T19:22:10.113Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:22:10.121Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/*.ts"
[2022-05-01T19:22:10.122Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:22:10.163Z][QUERY]: SHOW server_version;
[2022-05-01T19:24:13.240Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:24:13.246Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules//infra/typeorm/entities/*.ts"
[2022-05-01T19:24:13.248Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:24:13.254Z][QUERY]: SHOW server_version;
[2022-05-01T19:26:12.925Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:26:12.932Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules/infra/typeorm/entities/*.ts"
[2022-05-01T19:26:12.934Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:26:12.940Z][QUERY]: SHOW server_version;
[2022-05-01T19:26:36.839Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:26:36.846Z][INFO]: No classes were found using the provided glob pattern:  "./src/modules/infra/typeorm/entities/*.ts"
[2022-05-01T19:26:36.848Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:26:36.857Z][QUERY]: SHOW server_version;
[2022-05-01T19:27:53.497Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:27:53.513Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:27:53.521Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:27:53.528Z][QUERY]: SHOW server_version;
[2022-05-01T19:28:04.108Z][QUERY]: START TRANSACTION
[2022-05-01T19:28:04.115Z][QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin"]
[2022-05-01T19:28:04.118Z][FAILED QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin"]
[2022-05-01T19:28:04.118Z][QUERY ERROR]: error: column "createdAt" of relation "Users" does not exist
[2022-05-01T19:28:04.120Z][QUERY]: ROLLBACK
[2022-05-01T19:29:41.284Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:29:41.300Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:29:41.308Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:29:47.510Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:29:47.526Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:29:47.534Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:29:47.540Z][QUERY]: SHOW server_version;
[2022-05-01T19:31:02.483Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:31:02.498Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:31:02.505Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:31:02.512Z][QUERY]: SHOW server_version;
[2022-05-01T19:32:41.380Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:32:41.395Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:32:41.403Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:32:41.411Z][QUERY]: SHOW server_version;
[2022-05-01T19:33:33.965Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:33:33.979Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:33:33.987Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:33:34.006Z][QUERY]: SHOW server_version;
[2022-05-01T19:34:35.717Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:34:37.667Z][QUERY]: SHOW server_version;
[2022-05-01T19:34:37.670Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:34:37.676Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:34:37.679Z]1 migrations are already loaded in the database.
[2022-05-01T19:34:37.685Z]CreateTableUsers1651430840384 is the last executed migration. It was executed on Sun May 01 2022 15:47:20 GMT-0300 (Horário Padrão de Brasília).
[2022-05-01T19:34:37.685Z]Now reverting it...
[2022-05-01T19:34:37.686Z][QUERY]: START TRANSACTION
[2022-05-01T19:34:37.689Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:34:37.691Z][QUERY]: SELECT * FROM current_database()
[2022-05-01T19:34:37.693Z][QUERY]: SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'Users')
[2022-05-01T19:34:37.695Z][QUERY]: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
[2022-05-01T19:34:37.711Z][QUERY]: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'Users')
[2022-05-01T19:34:37.712Z][QUERY]: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'Users'))
[2022-05-01T19:34:37.712Z][QUERY]: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'Users'))
[2022-05-01T19:34:37.713Z][QUERY]: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'Users')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
[2022-05-01T19:34:37.732Z][QUERY]: DROP TABLE "Users"
[2022-05-01T19:34:37.738Z][QUERY]: DELETE FROM "migrations" WHERE "timestamp" = $1 AND "name" = $2 -- PARAMETERS: [1651430840384,"CreateTableUsers1651430840384"]
[2022-05-01T19:34:37.789Z]Migration CreateTableUsers1651430840384 has been reverted successfully.
[2022-05-01T19:34:37.789Z][QUERY]: COMMIT
[2022-05-01T19:34:57.493Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:34:59.448Z][QUERY]: SHOW server_version;
[2022-05-01T19:34:59.451Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:34:59.455Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
[2022-05-01T19:34:59.460Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:34:59.462Z]0 migrations are already loaded in the database.
[2022-05-01T19:34:59.463Z]1 migrations were found in the source code.
[2022-05-01T19:34:59.463Z]1 migrations are new migrations that needs to be executed.
[2022-05-01T19:34:59.464Z][QUERY]: START TRANSACTION
[2022-05-01T19:34:59.467Z][QUERY]: CREATE TABLE "Users" ("username" varchar(50) NOT NULL, "password" varchar(1000) NOT NULL, "name" varchar(100) NOT NULL, "status" numeric NOT NULL, "createdAt" timestamp NOT NULL DEFAULT now(), "createdBy" varchar(100) NOT NULL, "updatedAt" timestamp NOT NULL, "updatedBy" varchar(100) NOT NULL, "version" numeric NOT NULL, CONSTRAINT "PK_ffc81a3b97dcbf8e320d5106c0d" PRIMARY KEY ("username"))
[2022-05-01T19:34:59.484Z][QUERY]: INSERT INTO "migrations"("timestamp", "name") VALUES ($1, $2) -- PARAMETERS: [1651430840384,"CreateTableUsers1651430840384"]
[2022-05-01T19:34:59.533Z]Migration CreateTableUsers1651430840384 has been executed successfully.
[2022-05-01T19:34:59.536Z][QUERY]: COMMIT
[2022-05-01T19:35:04.437Z][QUERY]: START TRANSACTION
[2022-05-01T19:35:04.444Z][QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin"]
[2022-05-01T19:35:04.447Z][FAILED QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin"]
[2022-05-01T19:35:04.447Z][QUERY ERROR]: error: null value in column "username" of relation "Users" violates not-null constraint
[2022-05-01T19:35:04.448Z][QUERY]: ROLLBACK
[2022-05-01T19:39:42.589Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User" WHERE "User"."username" IN ($1) -- PARAMETERS: ["fulano"]
[2022-05-01T19:39:42.592Z][QUERY]: START TRANSACTION
[2022-05-01T19:39:42.594Z][QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, $3, $4, $5, $6) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin","fulano","123","fufu",1]
[2022-05-01T19:39:42.597Z][FAILED QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, $3, $4, $5, $6) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin","fulano","123","fufu",1]
[2022-05-01T19:39:42.597Z][QUERY ERROR]: error: null value in column "updatedAt" of relation "Users" violates not-null constraint
[2022-05-01T19:39:42.598Z][QUERY]: ROLLBACK
[2022-05-01T19:40:18.110Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:40:18.126Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:40:18.135Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:40:18.143Z][QUERY]: SHOW server_version;
[2022-05-01T19:40:28.511Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:40:30.477Z][QUERY]: SHOW server_version;
[2022-05-01T19:40:30.480Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:40:30.486Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:40:30.489Z]1 migrations are already loaded in the database.
[2022-05-01T19:40:30.490Z]CreateTableUsers1651430840384 is the last executed migration. It was executed on Sun May 01 2022 15:47:20 GMT-0300 (Horário Padrão de Brasília).
[2022-05-01T19:40:30.490Z]Now reverting it...
[2022-05-01T19:40:30.491Z][QUERY]: START TRANSACTION
[2022-05-01T19:40:30.493Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:40:30.495Z][QUERY]: SELECT * FROM current_database()
[2022-05-01T19:40:30.497Z][QUERY]: SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'Users')
[2022-05-01T19:40:30.499Z][QUERY]: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
[2022-05-01T19:40:30.504Z][QUERY]: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'Users')
[2022-05-01T19:40:30.505Z][QUERY]: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'Users'))
[2022-05-01T19:40:30.505Z][QUERY]: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'Users'))
[2022-05-01T19:40:30.505Z][QUERY]: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'Users')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
[2022-05-01T19:40:30.521Z][QUERY]: DROP TABLE "Users"
[2022-05-01T19:40:30.529Z][QUERY]: DELETE FROM "migrations" WHERE "timestamp" = $1 AND "name" = $2 -- PARAMETERS: [1651430840384,"CreateTableUsers1651430840384"]
[2022-05-01T19:40:30.583Z]Migration CreateTableUsers1651430840384 has been reverted successfully.
[2022-05-01T19:40:30.585Z][QUERY]: COMMIT
[2022-05-01T19:40:37.680Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:40:39.757Z][QUERY]: SHOW server_version;
[2022-05-01T19:40:39.761Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'migrations'
[2022-05-01T19:40:39.766Z][QUERY]: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
[2022-05-01T19:40:39.770Z][QUERY]: SELECT * FROM "migrations" "migrations" ORDER BY "id" DESC
[2022-05-01T19:40:39.772Z]0 migrations are already loaded in the database.
[2022-05-01T19:40:39.773Z]1 migrations were found in the source code.
[2022-05-01T19:40:39.773Z]1 migrations are new migrations that needs to be executed.
[2022-05-01T19:40:39.774Z][QUERY]: START TRANSACTION
[2022-05-01T19:40:39.777Z][QUERY]: CREATE TABLE "Users" ("username" varchar(50) NOT NULL, "password" varchar(1000) NOT NULL, "name" varchar(100) NOT NULL, "status" numeric NOT NULL, "createdAt" timestamp NOT NULL DEFAULT now(), "createdBy" varchar(100) NOT NULL, "updatedAt" timestamp NOT NULL DEFAULT now(), "updatedBy" varchar(100) NOT NULL, "version" numeric NOT NULL, CONSTRAINT "PK_ffc81a3b97dcbf8e320d5106c0d" PRIMARY KEY ("username"))
[2022-05-01T19:40:39.792Z][QUERY]: INSERT INTO "migrations"("timestamp", "name") VALUES ($1, $2) -- PARAMETERS: [1651430840384,"CreateTableUsers1651430840384"]
[2022-05-01T19:40:39.838Z]Migration CreateTableUsers1651430840384 has been executed successfully.
[2022-05-01T19:40:39.839Z][QUERY]: COMMIT
[2022-05-01T19:40:44.222Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User" WHERE "User"."username" IN ($1) -- PARAMETERS: ["fulano"]
[2022-05-01T19:40:44.227Z][QUERY]: START TRANSACTION
[2022-05-01T19:40:44.232Z][QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, $3, $4, $5, $6) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin","fulano","123","fufu",1]
[2022-05-01T19:40:44.282Z][QUERY]: COMMIT
[2022-05-01T19:47:40.764Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T19:47:40.783Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T19:47:40.791Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T19:47:40.797Z][QUERY]: SHOW server_version;
[2022-05-01T20:01:48.111Z][QUERY]: SELECT * FROM current_schema()
[2022-05-01T20:01:48.129Z][INFO]: All classes found using provided glob pattern "./src/modules/**/infra/typeorm/entities/*.ts" : "src/modules/users/infra/typeorm/entities/User.ts"
[2022-05-01T20:01:48.138Z][INFO]: All classes found using provided glob pattern "./src/shared/infra/typeorm/migrations/*.ts" : "src/shared/infra/typeorm/migrations/1651430840384-CreateTableUsers.ts"
[2022-05-01T20:01:48.146Z][QUERY]: SHOW server_version;
[2022-05-01T20:02:02.199Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User"
[2022-05-01T20:02:36.181Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User" WHERE "User"."username" IN ($1) -- PARAMETERS: ["ciclano"]
[2022-05-01T20:02:36.185Z][QUERY]: START TRANSACTION
[2022-05-01T20:02:36.191Z][QUERY]: INSERT INTO "Users"("createdAt", "createdBy", "updatedAt", "updatedBy", "version", "username", "password", "name", "status") VALUES (DEFAULT, $1, DEFAULT, $2, 1, $3, $4, $5, $6) RETURNING "createdAt", "updatedAt", "version" -- PARAMETERS: ["Admin","Admin","ciclano","444","cici",2]
[2022-05-01T20:02:36.195Z][QUERY]: COMMIT
[2022-05-01T20:02:38.502Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User"
[2022-05-01T20:25:32.543Z][QUERY]: SELECT "User"."createdAt" AS "User_createdAt", "User"."createdBy" AS "User_createdBy", "User"."updatedAt" AS "User_updatedAt", "User"."updatedBy" AS "User_updatedBy", "User"."version" AS "User_version", "User"."username" AS "User_username", "User"."password" AS "User_password", "User"."name" AS "User_name", "User"."status" AS "User_status" FROM "Users" "User"
